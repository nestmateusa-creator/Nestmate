<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NestMate - AI Chatbot Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 800px;
            height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .chatbot-header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .chatbot-header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .status-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #4CAF50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .message.bot .message-avatar {
            background: #e9ecef;
            color: #495057;
        }

        .message-content {
            background: white;
            padding: 15px 20px;
            border-radius: 18px;
            max-width: 70%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .message.bot .message-content {
            background: white;
            color: #333;
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
        }

        .chat-input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            padding: 15px 20px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s ease;
            resize: none;
            max-height: 120px;
            min-height: 50px;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .send-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            transition: transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .send-button:hover {
            transform: scale(1.05);
        }

        .send-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 8px;
            padding: 15px 20px;
            background: white;
            border-radius: 18px;
            max-width: 70%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #495057;
        }

        .quick-action-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }

        .welcome-message h3 {
            margin-bottom: 10px;
            color: #495057;
        }

        @media (max-width: 768px) {
            .chatbot-container {
                width: 95%;
                height: 90vh;
            }

            .message-content {
                max-width: 85%;
            }

            .quick-actions {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="chatbot-container">
        <div class="chatbot-header">
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>Online</span>
            </div>
            <h1><i class="fas fa-robot"></i> NestMate AI Assistant</h1>
            <p>Your smart home management companion</p>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <h3>üëã Welcome to NestMate AI!</h3>
                <p>I'm your comprehensive AI assistant with complete knowledge of the entire NestMate website! I can help you with website navigation, smart home setup, maintenance tracking, energy management, security features, document organization, shopping services, user profiles, technical support, and much more. Ask me anything about any aspect of the NestMate system!</p>
            </div>
        </div>

        <div class="chat-input-container">
            <div class="quick-actions">
                <button class="quick-action-btn" onclick="sendQuickMessage('Tell me about the NestMate website structure and features')">
                    üè† Website Overview
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('What are your pricing options and plans?')">
                    üí∞ Pricing & Plans
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('What are the main dashboard features and capabilities?')">
                    üìä Dashboard Features
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('How does the authentication system work?')">
                    üîê Authentication
                </button>
            </div>
            
            <div class="chat-input-wrapper">
                <textarea 
                    class="chat-input" 
                    id="chatInput" 
                    placeholder="Type your message here..."
                    rows="1"
                    onkeydown="handleKeyPress(event)"
                ></textarea>
                <button class="send-button" id="sendButton" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        class Chatbot {
            constructor() {
                this.messages = [];
                this.isTyping = false;
                this.chatMessages = document.getElementById('chatMessages');
                this.chatInput = document.getElementById('chatInput');
                this.sendButton = document.getElementById('sendButton');
                
                this.initializeEventListeners();
                this.addWelcomeMessage();
            }

            initializeEventListeners() {
                this.chatInput.addEventListener('input', () => {
                    this.adjustTextareaHeight();
                    this.updateSendButton();
                });
            }

            adjustTextareaHeight() {
                this.chatInput.style.height = 'auto';
                this.chatInput.style.height = Math.min(this.chatInput.scrollHeight, 120) + 'px';
            }

            updateSendButton() {
                const hasText = this.chatInput.value.trim().length > 0;
                this.sendButton.disabled = !hasText;
            }

            addWelcomeMessage() {
                setTimeout(() => {
                    this.addBotMessage("Hello! I'm your comprehensive NestMate AI assistant with complete knowledge of the entire website! I can help you with:\n\n‚Ä¢ **Website Navigation**: All pages, features, and functionality\n‚Ä¢ **Smart Home Setup**: Device integration and automation\n‚Ä¢ **Home Management**: Maintenance, energy, security, documents\n‚Ä¢ **User Features**: Profile management, authentication, settings\n‚Ä¢ **Shopping & Services**: Products, contractors, expert services\n‚Ä¢ **Technical Support**: Architecture, troubleshooting, development\n‚Ä¢ **Help & Support**: Getting started, troubleshooting, guides\n\nI have detailed knowledge of every file, feature, and aspect of the NestMate system. What would you like to know about today?");
                this.addQuickActions();
                this.addQuickActions();
            }, 1000);
            this.addQuickActions();
        }

            addQuickActions() {
                const quickActions = [
                    { text: "üè† Website Overview", action: "Tell me about the NestMate website structure and features" },
                    { text: "üí∞ Pricing & Plans", action: "What are your pricing options and plans?" },
                    { text: "üìä Dashboard Features", action: "What are the main dashboard features and capabilities?" },
                    { text: "üîê Authentication", action: "How does the authentication system work?" },
                    { text: "üí° Smart Home Setup", action: "How do I set up smart home devices?" },
                    { text: "üîß Maintenance Guide", action: "Tell me about the maintenance tracking system" },
                    { text: "‚ö° Energy Management", action: "How does the energy audit and management work?" },
                    { text: "üîí Security Features", action: "What security features are available?" },
                    { text: "üìÑ Document Management", action: "How do I organize and manage home documents?" },
                    { text: "üõí Shopping & Services", action: "Tell me about the shopping and services features" },
                    { text: "üë§ Profile Management", action: "How do I manage my user profile and settings?" },
                    { text: "‚öôÔ∏è Technical Support", action: "What are the technical details and architecture?" },
                    { text: "‚ùì Help & Support", action: "How can I get help and support?" }
                ];

                const actionsContainer = document.createElement('div');
                actionsContainer.className = 'quick-actions';
                actionsContainer.style.marginTop = '15px';

                quickActions.forEach(action => {
                    const button = document.createElement('button');
                    button.className = 'quick-action-btn';
                    button.textContent = action.text;
                    button.onclick = () => this.sendQuickMessage(action.action);
                    actionsContainer.appendChild(button);
                });

                this.chatMessages.appendChild(actionsContainer);
            }

            sendQuickMessage(message) {
                this.chatInput.value = message;
                this.sendMessage();
            }

            addMessage(content, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;

                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.innerHTML = isUser ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';

                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                messageContent.innerHTML = content.replace(/\n/g, '<br>');

                const time = document.createElement('div');
                time.className = 'message-time';
                time.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

                messageContent.appendChild(time);
                messageDiv.appendChild(avatar);
                messageDiv.appendChild(messageContent);

                this.chatMessages.appendChild(messageDiv);
                this.scrollToBottom();

                this.messages.push({ content, isUser, timestamp: new Date() });
            }

            addBotMessage(content) {
                this.addMessage(content, false);
            }

            addUserMessage(content) {
                this.addMessage(content, true);
            }

            showTypingIndicator() {
                if (this.isTyping) return;
                
                this.isTyping = true;
                const typingDiv = document.createElement('div');
                typingDiv.className = 'message bot typing-indicator';
                typingDiv.id = 'typingIndicator';
                
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.innerHTML = '<i class="fas fa-robot"></i>';

                const typingContent = document.createElement('div');
                typingContent.className = 'message-content';
                typingContent.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span>AI is typing</span>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                `;

                typingDiv.appendChild(avatar);
                typingDiv.appendChild(typingContent);
                this.chatMessages.appendChild(typingDiv);
                this.scrollToBottom();
            }

            hideTypingIndicator() {
                const typingIndicator = document.getElementById('typingIndicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
                this.isTyping = false;
            }

            scrollToBottom() {
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }

            async generateResponse(userMessage) {
                // Simulate AI processing time
                await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));

                const userMessageLower = userMessage.toLowerCase();
                
                // Website and App Knowledge Base
                const websiteKnowledge = {
                    'website': {
                        response: "**NestMate Website Overview**\n\nNestMate is a comprehensive digital home management application with the following key pages:\n\n**Main Pages**:\n‚Ä¢ `index.html` - Landing page with navigation and features\n‚Ä¢ `NestMate.html` - Main dashboard with smart home management\n‚Ä¢ `DashboardChatbot.html` - AI assistant (this page)\n‚Ä¢ `Dashboard-backup.html` - Backup dashboard interface\n\n**Authentication**:\n‚Ä¢ `signin.html` - User sign-in page\n‚Ä¢ `register.html` - User registration\n‚Ä¢ `nestmate-sales-login-register.html` - Sales team login\n\n**Home Management Features**:\n‚Ä¢ `maintenance-guide.html` - Home maintenance schedules and tips\n‚Ä¢ `energy-audit.html` - Energy efficiency analysis\n‚Ä¢ `home-value-tracker.html` - Property value monitoring\n‚Ä¢ `warranty-tracker.html` - Warranty management\n‚Ä¢ `insurance-claims.html` - Insurance claim assistance\n‚Ä¢ `emergency-contacts.html` - Emergency contact management\n‚Ä¢ `document-manager.html` - Document organization\n‚Ä¢ `import-export-files.html` - File import/export functionality\n\n**Shopping & Services**:\n‚Ä¢ `home-shop.html` - Smart home product shopping\n‚Ä¢ `expert-services.html` - Professional services directory\n‚Ä¢ `compare-contractor-bids.html` - Contractor comparison\n‚Ä¢ `contact-contractor.html` - Contractor communication\n‚Ä¢ `Startproshoppingcart.html` - Shopping cart system\n‚Ä¢ `startadvancedproshoppingcart.html` - Advanced cart features\n\n**User Management**:\n‚Ä¢ `profile.html` - User profile management\n‚Ä¢ `profile copy.html` - Profile backup\n‚Ä¢ `Download-documents.html` - Document downloads\n\n**Sales & Marketing**:\n‚Ä¢ `Sales.html` - Sales dashboard\n‚Ä¢ `SalesHomepage.html` - Sales homepage\n‚Ä¢ `SalesHomepage copy.html` - Sales homepage backup\n‚Ä¢ `pricing.html` - Pricing information\n‚Ä¢ `about.html` - About page\n‚Ä¢ `SUBSCRIBEPAGE.html` - Subscription management\n\n**Technical Files**:\n‚Ä¢ `scripts/` - JavaScript functionality\n‚Ä¢ `styles/` - CSS styling\n‚Ä¢ `server/` - Backend server\n‚Ä¢ `functions/` - Firebase functions\n‚Ä¢ `test/` - Testing files\n\nWhat specific feature or page would you like to know more about?"
                    },
                    'pricing': {
                        response: "**NestMate Pricing Information**\n\n**Simple, Transparent Pricing**\nChoose the plan that fits your home and lifestyle.\nNo hidden fees. Cancel anytime.\n\n**30 Day Free Trial** for all plans!\n\n**üìã Basic Plan - $5/month**\n‚úî Manage your first home with ease\n‚úî Stay on top of 10 essential tasks & reminders\n‚úî Instantly organize key home details\n‚úî Rock-solid cloud backup for peace of mind\n‚úî Save and revisit your favorite finds\n‚úî Discover smart product picks just for you\n\n**‚≠ê Most Popular - Pro Plan - $10/month**\n‚úî Create unlimited home profiles for every property\n‚úî Never miss a beat with unlimited tasks & reminders\n‚úî Get your personalized Home Health Score\n‚úî VIP priority support‚Äîget help fast\n‚úî Effortlessly export and backup your data\n‚úî All Basic features, supercharged\n‚úî Order your favorite products directly for your home\n‚úî Real-time price tracking & instant alerts\n‚úî Next-level product recommendations tailored to you\n\n**üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Advanced Pro Plan - $16/month**\n‚úî All Pro features, plus more family power\n‚úî Connect up to 5 family members‚Äîeveryone's included\n‚úî Share tasks & reminders for total home harmony\n‚úî Family dashboard for effortless collaboration\n‚úî Dedicated family-first support\n‚úî Build and share product lists together\n‚úî Order products as a team‚Äîcollaborate and save\n‚úî Unlimited access to emergency home & contractor services, hand-picked by NestMate experts\n\n**üí≥ Billing & Payment**:\n‚Ä¢ **Monthly Billing**: All plans billed monthly\n‚Ä¢ **No Long-term Contracts**: Cancel anytime\n‚Ä¢ **30-Day Free Trial**: Try any plan risk-free\n‚Ä¢ **No Hidden Fees**: Transparent pricing\n‚Ä¢ **Easy Cancellation**: Cancel anytime with no penalties\n\n**üéÅ Special Features**:\n‚Ä¢ **Free Trial**: 30-day free trial on all plans\n‚Ä¢ **Home Health Score**: Personalized home assessment (Pro & Advanced)\n‚Ä¢ **Family Collaboration**: Up to 5 family members (Advanced Pro)\n‚Ä¢ **Priority Support**: VIP support for Pro and Advanced Pro users\n‚Ä¢ **Product Integration**: Direct ordering and price tracking\n‚Ä¢ **Emergency Services**: Contractor services (Advanced Pro)\n\n**üìû Contact & Support**:\n‚Ä¢ **Start Free Trial**: Available on all plans\n‚Ä¢ **Customer Support**: Available for all users\n‚Ä¢ **Priority Support**: Pro and Advanced Pro users\n‚Ä¢ **Family Support**: Dedicated support for Advanced Pro families\n\n**üîÑ Plan Comparison**:\n‚Ä¢ **Basic ($5)**: Perfect for single home management\n‚Ä¢ **Pro ($10)**: Best value for comprehensive home management\n‚Ä¢ **Advanced Pro ($16)**: Ideal for families and multiple properties\n\nWould you like me to help you choose the right plan for your needs or explain any specific features?"
                    },
                    'dashboard': {
                        response: "**NestMate Dashboard Features**\n\n**Main Dashboard (`NestMate.html`)**:\n‚Ä¢ **Smart Home Management**: Control and monitor all smart devices\n‚Ä¢ **Firebase Integration**: Real-time data sync and user authentication\n‚Ä¢ **Google Maps Integration**: Location-based services\n‚Ä¢ **Widget System**: Draggable, customizable dashboard widgets\n‚Ä¢ **User Authentication**: Google sign-in with Firebase Auth\n‚Ä¢ **Real-time Updates**: Live data from connected devices\n‚Ä¢ **Responsive Design**: Works on desktop and mobile\n\n**Dashboard Features**:\n‚Ä¢ **Home Health Score**: Computed from user-supplied home data\n‚Ä¢ **Device Management**: Add, configure, and control smart devices\n‚Ä¢ **Data Persistence**: Local storage with Firebase backup\n‚Ä¢ **Widget Customization**: Drag-and-drop widget reordering\n‚Ä¢ **User Profiles**: Personalized settings and preferences\n‚Ä¢ **Analytics**: Usage statistics and insights\n\n**Technical Stack**:\n‚Ä¢ **Frontend**: HTML5, CSS3, JavaScript (ES6+)\n‚Ä¢ **Backend**: Firebase (Auth, Firestore, Functions)\n‚Ä¢ **Maps**: Google Maps JavaScript API\n‚Ä¢ **Icons**: Font Awesome 6.4.0\n‚Ä¢ **Styling**: Custom CSS with CSS variables\n\n**Key Scripts**:\n‚Ä¢ `scripts/dashboard.js` - Main dashboard logic\n‚Ä¢ `scripts/firebaseconfig.js` - Firebase configuration\n‚Ä¢ `scripts/section.js` - Section management\n‚Ä¢ `scripts/embed-chatbot.js` - Chatbot integration\n\nWould you like me to explain any specific dashboard feature in detail?"
                    },
                    'authentication': {
                        response: "**NestMate Authentication System**\n\n**Authentication Methods**:\n‚Ä¢ **Google Sign-In**: Primary authentication method\n‚Ä¢ **Firebase Auth**: Secure user management\n‚Ä¢ **Email/Password**: Traditional login option\n\n**User Management Features**:\n‚Ä¢ **Profile Management**: Update user information and preferences\n‚Ä¢ **Account Security**: Password changes and security settings\n‚Ä¢ **Session Management**: Automatic login persistence\n‚Ä¢ **Multi-user Support**: Family member accounts\n\n**Security Features**:\n‚Ä¢ **Firebase Security Rules**: Database access control\n‚Ä¢ **Token-based Authentication**: Secure API access\n‚Ä¢ **Data Encryption**: Sensitive data protection\n‚Ä¢ **Session Timeout**: Automatic logout for security\n\n**User Roles**:\n‚Ä¢ **Homeowner**: Full access to all features\n‚Ä¢ **Family Member**: Limited access based on permissions\n‚Ä¢ **Sales Team**: Special access for sales operations\n‚Ä¢ **Admin**: System administration capabilities\n\n**Profile Features**:\n‚Ä¢ **Personal Information**: Name, email, phone, address\n‚Ä¢ **Home Details**: Property information and preferences\n‚Ä¢ **Device Preferences**: Smart device settings\n‚Ä¢ **Notification Settings**: Email and push notifications\n\n**Files Involved**:\n‚Ä¢ `signin.html` - Login interface\n‚Ä¢ `register.html` - Registration form\n‚Ä¢ `profile.html` - Profile management\n‚Ä¢ `scripts/firebaseconfig.js` - Auth configuration\n\nNeed help with account setup or security?"
                    },
                    'smart home': {
                        response: "**NestMate Smart Home Integration**\n\n**Supported Smart Devices**:\n‚Ä¢ **Smart Lighting**: Philips Hue, LIFX, WiFi bulbs\n‚Ä¢ **Thermostats**: Nest, Ecobee, Honeywell\n‚Ä¢ **Security**: Smart locks, cameras, sensors\n‚Ä¢ **Appliances**: Smart plugs, switches, outlets\n‚Ä¢ **Entertainment**: Smart TVs, speakers, streaming devices\n\n**Integration Features**:\n‚Ä¢ **Unified Control**: Manage all devices from one dashboard\n‚Ä¢ **Automation Rules**: Create custom automation scenarios\n‚Ä¢ **Scheduling**: Set up time-based device control\n‚Ä¢ **Geofencing**: Location-based automation\n‚Ä¢ **Voice Control**: Integration with voice assistants\n\n**Device Management**:\n‚Ä¢ **Easy Setup**: Step-by-step device pairing\n‚Ä¢ **Room Organization**: Group devices by room\n‚Ä¢ **Custom Names**: Personalize device names\n‚Ä¢ **Status Monitoring**: Real-time device status\n‚Ä¢ **Usage Analytics**: Energy consumption tracking\n\n**Automation Capabilities**:\n‚Ä¢ **Morning Routine**: Lights, thermostat, coffee maker\n‚Ä¢ **Away Mode**: Security activation, energy saving\n‚Ä¢ **Evening Routine**: Lighting, entertainment, security\n‚Ä¢ **Weather Integration**: Adjust settings based on weather\n‚Ä¢ **Occupancy Detection**: Motion-based automation\n\n**Security & Privacy**:\n‚Ä¢ **Local Processing**: Device data stays on your network\n‚Ä¢ **Encrypted Communication**: Secure device communication\n‚Ä¢ **Access Control**: Family member permissions\n‚Ä¢ **Activity Logs**: Track all device interactions\n\n**Troubleshooting**:\n‚Ä¢ **Connection Issues**: WiFi and network diagnostics\n‚Ä¢ **Device Compatibility**: Supported device lists\n‚Ä¢ **Firmware Updates**: Automatic device updates\n‚Ä¢ **Support Integration**: Direct access to device support\n\nWould you like help setting up specific smart devices or creating automation rules?"
                    },
                    'maintenance': {
                        response: "**NestMate Home Maintenance System**\n\n**Maintenance Guide (`maintenance-guide.html`)**:\n‚Ä¢ **Scheduled Maintenance**: Monthly, quarterly, and annual tasks\n‚Ä¢ **Custom Reminders**: Personalized maintenance schedules\n‚Ä¢ **Task Categories**: HVAC, plumbing, electrical, general\n‚Ä¢ **Progress Tracking**: Mark completed tasks\n‚Ä¢ **Documentation**: Store maintenance records\n\n**Maintenance Categories**:\n‚Ä¢ **HVAC System**:\n  - Filter replacement schedules\n  - Duct cleaning reminders\n  - System inspection checklists\n  - Seasonal maintenance tasks\n\n‚Ä¢ **Plumbing**:\n  - Leak detection and prevention\n  - Water heater maintenance\n  - Pipe insulation checks\n  - Fixture maintenance\n\n‚Ä¢ **Electrical**:\n  - Smoke detector testing\n  - GFCI outlet checks\n  - Wiring inspections\n  - Appliance maintenance\n\n‚Ä¢ **General Home**:\n  - Gutter cleaning\n  - Weather stripping\n  - Garage door maintenance\n  - Exterior inspections\n\n**Features**:\n‚Ä¢ **Automated Reminders**: Email and push notifications\n‚Ä¢ **Service History**: Track all maintenance activities\n‚Ä¢ **Warranty Integration**: Link maintenance to warranties\n‚Ä¢ **Cost Tracking**: Record maintenance expenses\n‚Ä¢ **Professional Services**: Connect with contractors\n\n**Documentation**:\n‚Ä¢ **Photo Storage**: Before/after maintenance photos\n‚Ä¢ **Receipt Management**: Store service receipts\n‚Ä¢ **Instruction Manuals**: Access device manuals\n‚Ä¢ **Video Tutorials**: Step-by-step maintenance guides\n\n**Integration**:\n‚Ä¢ **Calendar Sync**: Add maintenance to your calendar\n‚Ä¢ **Contractor Communication**: Direct messaging with professionals\n‚Ä¢ **Insurance Claims**: Link maintenance to insurance\n‚Ä¢ **Home Value Tracking**: Impact on property value\n\nWould you like me to help you set up a maintenance schedule or explain specific maintenance tasks?"
                    },
                    'energy': {
                        response: "**NestMate Energy Management**\n\n**Energy Audit (`energy-audit.html`)**:\n‚Ä¢ **Usage Analysis**: Track energy consumption patterns\n‚Ä¢ **Efficiency Scoring**: Home energy efficiency rating\n‚Ä¢ **Cost Analysis**: Monthly and annual energy costs\n‚Ä¢ **Savings Calculator**: Potential energy savings\n‚Ä¢ **Recommendations**: Personalized energy-saving tips\n\n**Energy Monitoring**:\n‚Ä¢ **Real-time Usage**: Live energy consumption data\n‚Ä¢ **Historical Data**: Long-term usage trends\n‚Ä¢ **Device Breakdown**: Per-device energy usage\n‚Ä¢ **Peak Usage Alerts**: High consumption notifications\n‚Ä¢ **Cost Projections**: Future energy cost estimates\n\n**Smart Energy Features**:\n‚Ä¢ **Smart Thermostat Integration**: Optimize heating/cooling\n‚Ä¢ **Lighting Automation**: Energy-efficient lighting schedules\n‚Ä¢ **Appliance Management**: Smart plug energy monitoring\n‚Ä¢ **Solar Integration**: Solar panel monitoring\n‚Ä¢ **Battery Storage**: Home battery system management\n\n**Energy-Saving Tips**:\n‚Ä¢ **HVAC Optimization**:\n  - Optimal temperature settings\n  - Geofencing for away mode\n  - Regular filter maintenance\n  - Duct sealing recommendations\n\n‚Ä¢ **Lighting Efficiency**:\n  - LED bulb recommendations\n  - Motion sensor installation\n  - Daylight harvesting\n  - Smart scheduling\n\n‚Ä¢ **Appliance Management**:\n  - Energy-efficient settings\n  - Load balancing\n  - Standby power reduction\n  - Upgrade recommendations\n\n‚Ä¢ **Home Improvements**:\n  - Insulation upgrades\n  - Window efficiency\n  - Weather sealing\n  - Renewable energy options\n\n**Reporting**:\n‚Ä¢ **Monthly Reports**: Detailed energy usage reports\n‚Ä¢ **Comparison Tools**: Year-over-year comparisons\n‚Ä¢ **Savings Tracking**: Monitor energy cost reductions\n‚Ä¢ **Environmental Impact**: Carbon footprint calculations\n\n**Integration**:\n‚Ä¢ **Utility Company Data**: Import usage from utility providers\n‚Ä¢ **Smart Meter Integration**: Real-time meter data\n‚Ä¢ **Weather Data**: Weather-based energy optimization\n‚Ä¢ **Market Rates**: Energy price monitoring\n\nWould you like help analyzing your energy usage or implementing energy-saving measures?"
                    },
                    'security': {
                        response: "**NestMate Home Security Features**\n\n**Security System Integration**:\n‚Ä¢ **Smart Locks**: Remote locking/unlocking capabilities\n‚Ä¢ **Security Cameras**: Live video monitoring and recording\n‚Ä¢ **Motion Sensors**: Occupancy detection and alerts\n‚Ä¢ **Door/Window Sensors**: Entry point monitoring\n‚Ä¢ **Glass Break Sensors**: Advanced intrusion detection\n‚Ä¢ **Environmental Sensors**: Smoke, CO, water leak detection\n\n**Security Features**:\n‚Ä¢ **Remote Monitoring**: Check home status from anywhere\n‚Ä¢ **Real-time Alerts**: Instant notifications for security events\n‚Ä¢ **Video Recording**: Cloud and local video storage\n‚Ä¢ **Access Control**: Manage who can enter your home\n‚Ä¢ **Activity Logs**: Track all security events\n‚Ä¢ **Emergency Contacts**: Quick access to emergency services\n\n**Automation Rules**:\n‚Ä¢ **Away Mode**: Automatic security activation when leaving\n‚Ä¢ **Night Mode**: Enhanced security during sleeping hours\n‚Ä¢ **Geofencing**: Location-based security activation\n‚Ä¢ **Schedule-based**: Time-based security rules\n‚Ä¢ **Weather Integration**: Storm-related security measures\n\n**Emergency Features**:\n‚Ä¢ **Emergency Contacts (`emergency-contacts.html`)**:\n  - Quick dial emergency numbers\n  - Family member contacts\n  - Service provider contacts\n  - Medical emergency information\n  - Fire and police department contacts\n\n‚Ä¢ **Panic Alerts**: One-touch emergency notifications\n‚Ä¢ **Medical Alerts**: Health monitoring integration\n‚Ä¢ **Weather Alerts**: Severe weather notifications\n‚Ä¢ **Service Alerts**: System malfunction notifications\n\n**Professional Monitoring**:\n‚Ä¢ **24/7 Monitoring**: Professional security monitoring\n‚Ä¢ **Police Dispatch**: Automatic emergency response\n‚Ä¢ **Medical Alert**: Health emergency response\n‚Ä¢ **Fire Monitoring**: Smoke and fire detection\n‚Ä¢ **Carbon Monoxide**: CO level monitoring\n\n**Integration**:\n‚Ä¢ **Insurance Integration**: Security system discounts\n‚Ä¢ **Home Value**: Security impact on property value\n‚Ä¢ **Maintenance**: Security system maintenance tracking\n‚Ä¢ **Warranty**: Security device warranty management\n\n**Privacy & Data**:\n‚Ä¢ **Local Storage**: Video and data stored locally\n‚Ä¢ **Encrypted Communication**: Secure data transmission\n‚Ä¢ **Access Logs**: Track who accessed security data\n‚Ä¢ **Data Retention**: Configurable data storage periods\n\nWould you like help setting up your security system or configuring specific security features?"
                    },
                    'documents': {
                        response: "**NestMate Document Management**\n\n**Document Manager (`document-manager.html`)**:\n‚Ä¢ **File Organization**: Categorize and organize documents\n‚Ä¢ **Search Functionality**: Quick document retrieval\n‚Ä¢ **Cloud Storage**: Secure document storage\n‚Ä¢ **Access Control**: Family member document access\n‚Ä¢ **Version Control**: Track document changes\n\n**Document Categories**:\n‚Ä¢ **Home Documents**:\n  - Property deeds and titles\n  - Mortgage documents\n  - Insurance policies\n  - Property tax records\n  - Home improvement permits\n\n‚Ä¢ **Warranty Information (`warranty-tracker.html`)**:\n  - Appliance warranties\n  - Electronics warranties\n  - Home system warranties\n  - Extended warranty tracking\n  - Warranty claim history\n\n‚Ä¢ **Insurance Documents (`insurance-claims.html`)**:\n  - Policy documents\n  - Claim forms\n  - Damage assessments\n  - Settlement records\n  - Contact information\n\n‚Ä¢ **Maintenance Records**:\n  - Service receipts\n  - Maintenance schedules\n  - Contractor invoices\n  - Inspection reports\n  - Repair documentation\n\n**File Management**:\n‚Ä¢ **Import/Export (`import-export-files.html`)**:\n  - Bulk file upload\n  - Document scanning\n  - PDF generation\n  - File format conversion\n  - Backup and restore\n\n‚Ä¢ **Download Management (`Download-documents.html`)**:\n  - Secure file downloads\n  - Batch downloading\n  - File sharing\n  - Access permissions\n  - Download history\n\n**Features**:\n‚Ä¢ **OCR Technology**: Extract text from images\n‚Ä¢ **Digital Signatures**: Electronic document signing\n‚Ä¢ **Template Library**: Pre-filled document templates\n‚Ä¢ **Reminder System**: Document renewal reminders\n‚Ä¢ **Compliance Tracking**: Regulatory compliance monitoring\n\n**Security**:\n‚Ä¢ **Encrypted Storage**: Secure document encryption\n‚Ä¢ **Access Logs**: Track document access\n‚Ä¢ **Backup Systems**: Automatic document backup\n‚Ä¢ **Recovery Options**: Document recovery tools\n\n**Integration**:\n‚Ä¢ **Calendar Integration**: Document deadline reminders\n‚Ä¢ **Email Integration**: Document sharing via email\n‚Ä¢ **Mobile Access**: Document access on mobile devices\n‚Ä¢ **Print Services**: Direct printing from the system\n\nWould you like help organizing your documents or setting up document management features?"
                    },
                    'shopping': {
                        response: "**NestMate Shopping & Services**\n\n**Home Shop (`home-shop.html`)**:\n‚Ä¢ **Smart Home Products**: Curated selection of smart devices\n‚Ä¢ **Product Reviews**: User and expert reviews\n‚Ä¢ **Price Comparison**: Compare prices across retailers\n‚Ä¢ **Compatibility Check**: Ensure device compatibility\n‚Ä¢ **Installation Services**: Professional installation options\n\n**Shopping Features**:\n‚Ä¢ **Shopping Cart (`Startproshoppingcart.html`)**:\n  - Add/remove items\n  - Quantity management\n  - Price calculations\n  - Shipping options\n  - Secure checkout\n\n‚Ä¢ **Advanced Cart (`startadvancedproshoppingcart.html`)**:\n  - Wishlist management\n  - Price alerts\n  - Bulk ordering\n  - Subscription options\n  - Loyalty programs\n\n**Expert Services (`expert-services.html`)**:\n‚Ä¢ **Professional Directory**: Verified service providers\n‚Ä¢ **Service Categories**:\n  - HVAC technicians\n  - Plumbers\n  - Electricians\n  - Security installers\n  - Home inspectors\n  - Landscapers\n  - Cleaning services\n\n‚Ä¢ **Service Features**:\n  - Provider ratings and reviews\n  - Service area coverage\n  - Availability scheduling\n  - Pricing estimates\n  - Booking management\n\n**Contractor Management**:\n‚Ä¢ **Bid Comparison (`compare-contractor-bids.html`)**:\n  - Multiple bid collection\n  - Side-by-side comparison\n  - Cost breakdown analysis\n  - Timeline comparison\n  - Quality assessment\n\n‚Ä¢ **Contractor Communication (`contact-contractor.html`)**:\n  - Direct messaging\n  - File sharing\n  - Project updates\n  - Payment tracking\n  - Work documentation\n\n**Payment Integration**:\n‚Ä¢ **Stripe Backend (`scripts/stripe-backend.js`)**:\n  - Secure payment processing\n  - Multiple payment methods\n  - Subscription management\n  - Invoice generation\n  - Payment history\n\n‚Ä¢ **Amazon Backend (`scripts/amazon-backend.js`)**:\n  - Amazon product integration\n  - Price tracking\n  - Order management\n  - Shipping tracking\n  - Review integration\n\n**Features**:\n‚Ä¢ **Price Alerts**: Notifications for price drops\n‚Ä¢ **Installation Scheduling**: Book professional installation\n‚Ä¢ **Warranty Registration**: Automatic warranty registration\n‚Ä¢ **Product Support**: Direct access to product support\n‚Ä¢ **Return Management**: Easy return and exchange process\n\n**User Experience**:\n‚Ä¢ **Personalized Recommendations**: Based on home profile\n‚Ä¢ **Compatibility Warnings**: Prevent incompatible purchases\n‚Ä¢ **Installation Guides**: Step-by-step setup instructions\n‚Ä¢ **Troubleshooting**: Product-specific help\n‚Ä¢ **Community Support**: User forums and discussions\n\nWould you like help finding specific products or services, or setting up your shopping preferences?"
                    },
                    'profile': {
                        response: "**NestMate User Profile Management**\n\n**Profile Features (`profile.html`)**:\n‚Ä¢ **Personal Information**: Name, email, phone, address\n‚Ä¢ **Home Details**: Property information and characteristics\n‚Ä¢ **Preferences**: Customizable settings and preferences\n‚Ä¢ **Security Settings**: Password, 2FA, privacy controls\n‚Ä¢ **Notification Settings**: Email and push notification preferences\n\n**Profile Management**:\n‚Ä¢ **Account Settings**:\n  - Profile picture upload\n  - Contact information updates\n  - Address changes\n  - Email preferences\n  - Language settings\n\n‚Ä¢ **Home Profile**:\n  - Property details\n  - Square footage\n  - Number of rooms\n  - Home age and type\n  - Smart device inventory\n\n‚Ä¢ **Family Management**:\n  - Add family members\n  - Set access permissions\n  - Share home access\n  - Manage notifications\n  - Activity monitoring\n\n**Data Management**:\n‚Ä¢ **Profile Backup (`profile copy.html`)**:\n  - Automatic profile backups\n  - Data export options\n  - Profile restoration\n  - Cross-device sync\n  - Version history\n\n‚Ä¢ **Data Deletion (`scripts/profile-firebase-delete.js`)**:\n  - Account deletion options\n  - Data removal tools\n  - Privacy controls\n  - GDPR compliance\n  - Data retention policies\n\n**Privacy & Security**:\n‚Ä¢ **Data Encryption**: Secure data storage\n‚Ä¢ **Access Controls**: Manage who can see your data\n‚Ä¢ **Activity Logs**: Track profile changes\n‚Ä¢ **Two-Factor Authentication**: Enhanced security\n‚Ä¢ **Privacy Settings**: Control data sharing\n\n**Integration**:\n‚Ä¢ **Device Sync**: Profile data across all devices\n‚Ä¢ **Service Integration**: Connect with third-party services\n‚Ä¢ **Data Import**: Import data from other platforms\n‚Ä¢ **API Access**: Programmatic profile access\n\n**Features**:\n‚Ä¢ **Personalization**: Customize dashboard and features\n‚Ä¢ **Preferences**: Set default settings and behaviors\n‚Ä¢ **Notifications**: Manage all notification types\n‚Ä¢ **Accessibility**: Accessibility settings and options\n‚Ä¢ **Language Support**: Multiple language options\n\nWould you like help setting up your profile or managing your account settings?"
                    },
                    'technical': {
                        response: "**NestMate Technical Architecture**\n\n**Frontend Technology**:\n‚Ä¢ **HTML5**: Semantic markup and modern web standards\n‚Ä¢ **CSS3**: Advanced styling with CSS variables and animations\n‚Ä¢ **JavaScript (ES6+)**: Modern JavaScript with async/await\n‚Ä¢ **Responsive Design**: Mobile-first responsive layouts\n‚Ä¢ **Progressive Web App**: PWA capabilities for mobile\n\n**Backend Services**:\n‚Ä¢ **Firebase Platform**:\n  - **Authentication**: Google sign-in and user management\n  - **Firestore**: Real-time NoSQL database\n  - **Functions**: Serverless backend functions\n  - **Hosting**: Static website hosting\n  - **Analytics**: User behavior tracking\n\n**Key Scripts**:\n‚Ä¢ `scripts/dashboard.js` - Main dashboard functionality\n‚Ä¢ `scripts/firebaseconfig.js` - Firebase configuration\n‚Ä¢ `scripts/section.js` - Section and widget management\n‚Ä¢ `scripts/embed-chatbot.js` - AI chatbot integration\n‚Ä¢ `scripts/gethomedata.js` - Home data retrieval\n‚Ä¢ `scripts/stripe-backend.js` - Payment processing\n‚Ä¢ `scripts/amazon-backend.js` - Amazon integration\n\n**External Integrations**:\n‚Ä¢ **Google Maps API**: Location services and mapping\n‚Ä¢ **Stripe API**: Payment processing and subscriptions\n‚Ä¢ **Amazon API**: Product integration and pricing\n‚Ä¢ **Font Awesome**: Icon library\n‚Ä¢ **Google Fonts**: Typography\n\n**Development Tools**:\n‚Ä¢ **Testing**:\n  - `test/` - Unit and integration tests\n  - `test/e2e.spec.js` - End-to-end testing\n  - `test/health.test.js` - Health monitoring tests\n  - `test/section.test.js` - Section functionality tests\n\n‚Ä¢ **Build Tools**:\n  - `package.json` - Dependencies and scripts\n  - `netlify.toml` - Deployment configuration\n  - `firebase.json` - Firebase configuration\n\n**Data Management**:\n‚Ä¢ **Local Storage**: Client-side data persistence\n‚Ä¢ **Firestore**: Cloud database with real-time sync\n‚Ä¢ **File Storage**: Document and media storage\n‚Ä¢ **Caching**: Performance optimization\n\n**Security Features**:\n‚Ä¢ **Firebase Security Rules**: Database access control\n‚Ä¢ **HTTPS**: Secure data transmission\n‚Ä¢ **Input Validation**: Client and server-side validation\n‚Ä¢ **XSS Protection**: Cross-site scripting prevention\n‚Ä¢ **CSRF Protection**: Cross-site request forgery prevention\n\n**Performance Optimization**:\n‚Ä¢ **Code Minification**: Optimized JavaScript and CSS\n‚Ä¢ `scripts/dashboard.min.js` - Minified dashboard code\n‚Ä¢ `styles/main.min.css` - Minified stylesheets\n‚Ä¢ **Image Optimization**: Compressed images and icons\n‚Ä¢ **Lazy Loading**: On-demand content loading\n‚Ä¢ **CDN Integration**: Fast content delivery\n\n**Deployment**:\n‚Ä¢ **Netlify**: Static site hosting and deployment\n‚Ä¢ **Firebase Hosting**: Alternative hosting option\n‚Ä¢ **CI/CD**: Automated deployment pipelines\n‚Ä¢ **Environment Management**: Development, staging, production\n\nWould you like me to explain any specific technical aspect or help with development questions?"
                    },
                    'help': {
                        response: "**NestMate Help & Support**\n\n**Getting Started**:\n‚Ä¢ **Account Setup**: Create your NestMate account\n‚Ä¢ **Home Profile**: Add your home information\n‚Ä¢ **Device Setup**: Connect your smart devices\n‚Ä¢ **Dashboard Tour**: Learn about dashboard features\n‚Ä¢ **First Automation**: Create your first automation rule\n\n**Common Tasks**:\n‚Ä¢ **Adding Devices**: Step-by-step device pairing\n‚Ä¢ **Creating Automations**: Set up smart home rules\n‚Ä¢ **Managing Documents**: Organize home documents\n‚Ä¢ **Scheduling Maintenance**: Set up maintenance reminders\n‚Ä¢ **Energy Monitoring**: Track energy usage\n‚Ä¢ **Security Setup**: Configure home security\n\n**Troubleshooting**:\n‚Ä¢ **Device Connection Issues**: WiFi and network problems\n‚Ä¢ **App Performance**: Slow loading or crashes\n‚Ä¢ **Data Sync Issues**: Firebase connection problems\n‚Ä¢ **Payment Problems**: Stripe payment issues\n‚Ä¢ **Account Access**: Login and authentication issues\n\n**Support Resources**:\n‚Ä¢ **Documentation**: Comprehensive user guides\n‚Ä¢ **Video Tutorials**: Step-by-step video guides\n‚Ä¢ **FAQ Section**: Common questions and answers\n‚Ä¢ **Community Forum**: User discussions and tips\n‚Ä¢ **Live Chat**: Real-time support (this chatbot)\n\n**Contact Information**:\n‚Ä¢ **Email Support**: support@nestmate.com\n‚Ä¢ **Phone Support**: 1-800-NESTMATE\n‚Ä¢ **Live Chat**: Available 24/7 (this interface)\n‚Ä¢ **Social Media**: Facebook, Twitter, Instagram\n‚Ä¢ **Help Center**: Online knowledge base\n\n**Feature Guides**:\n‚Ä¢ **Smart Home Setup**: Complete smart home guide\n‚Ä¢ **Document Management**: Organizing home documents\n‚Ä¢ **Maintenance Tracking**: Home maintenance guide\n‚Ä¢ **Energy Management**: Energy saving strategies\n‚Ä¢ **Security Features**: Home security setup\n‚Ä¢ **Shopping Guide**: Smart home shopping tips\n\n**Account Management**:\n‚Ä¢ **Profile Settings**: Update personal information\n‚Ä¢ **Privacy Controls**: Manage data sharing\n‚Ä¢ **Notification Preferences**: Customize alerts\n‚Ä¢ **Family Management**: Add family members\n‚Ä¢ **Data Export**: Download your data\n\n**Technical Support**:\n‚Ä¢ **System Requirements**: Device compatibility\n‚Ä¢ **Network Setup**: WiFi and connectivity\n‚Ä¢ **Firebase Issues**: Database and authentication\n‚Ä¢ **API Integration**: Third-party service connections\n‚Ä¢ **Performance Optimization**: Speed and efficiency\n\nWhat specific help do you need? I can provide detailed guidance for any NestMate feature!"
                    }
                };

                // Check for website-specific queries first
                for (const [key, data] of Object.entries(websiteKnowledge)) {
                    if (userMessageLower.includes(key)) {
                        return data.response;
                    }
                }

                // Original smart home responses
                const smartHomeResponses = {
                    'smart lighting': {
                        response: "To set up smart lighting in your home:\n\n1. **Choose your bulbs**: Look for WiFi-enabled or Zigbee smart bulbs\n2. **Install the bulbs**: Replace existing bulbs with smart ones\n3. **Download the app**: Use your smart home app (like NestMate)\n4. **Connect to WiFi**: Follow the pairing instructions\n5. **Create schedules**: Set up automation for different times\n6. **Group lights**: Organize lights by room or function\n\nWould you like me to help you with a specific brand or setup process?",
                        followUp: "What type of smart lighting are you interested in?"
                    },
                    'maintenance': {
                        response: "Here's your monthly home maintenance checklist:\n\n**HVAC System**:\n‚Ä¢ Replace air filters\n‚Ä¢ Clean vents and registers\n\n**Plumbing**:\n‚Ä¢ Check for leaks under sinks\n‚Ä¢ Test water pressure\n‚Ä¢ Clean shower heads\n\n**Electrical**:\n‚Ä¢ Test smoke detectors\n‚Ä¢ Check GFCI outlets\n‚Ä¢ Inspect extension cords\n\n**General**:\n‚Ä¢ Clean gutters\n‚Ä¢ Check weather stripping\n‚Ä¢ Test garage door sensors\n\nWould you like me to create a personalized maintenance schedule for your home?",
                        followUp: "Do you have any specific maintenance concerns?"
                    },
                    'energy': {
                        response: "Here are effective ways to save energy:\n\n**Smart Thermostat**:\n‚Ä¢ Set optimal temperatures (68¬∞F winter, 78¬∞F summer)\n‚Ä¢ Use scheduling features\n‚Ä¢ Enable geofencing\n\n**Lighting**:\n‚Ä¢ Switch to LED bulbs\n‚Ä¢ Use motion sensors\n‚Ä¢ Implement smart scheduling\n\n**Appliances**:\n‚Ä¢ Run full loads in dishwasher/washer\n‚Ä¢ Clean dryer vents regularly\n‚Ä¢ Use energy-efficient settings\n\n**Insulation**:\n‚Ä¢ Seal air leaks\n‚Ä¢ Add weather stripping\n‚Ä¢ Insulate attic and walls\n\nI can help you calculate potential savings!",
                        followUp: "Would you like me to analyze your current energy usage?"
                    },
                    'security': {
                        response: "Here's how to enhance your home security:\n\n**Smart Locks**:\n‚Ä¢ Install smart deadbolts\n‚Ä¢ Set up access codes\n‚Ä¢ Enable remote locking\n\n**Cameras**:\n‚Ä¢ Install doorbell cameras\n‚Ä¢ Add outdoor security cameras\n‚Ä¢ Set up motion detection\n\n**Sensors**:\n‚Ä¢ Door/window sensors\n‚Ä¢ Motion detectors\n‚Ä¢ Glass break sensors\n\n**Monitoring**:\n‚Ä¢ Professional monitoring service\n‚Ä¢ Mobile app notifications\n‚Ä¢ Integration with smart home system\n\n**Best Practices**:\n‚Ä¢ Keep systems updated\n‚Ä¢ Use strong passwords\n‚Ä¢ Regular testing\n\nWould you like recommendations for specific security products?",
                        followUp: "What's your current security setup?"
                    },
                    'thermostat': {
                        response: "Optimize your smart thermostat with these tips:\n\n**Temperature Settings**:\n‚Ä¢ Winter: 68¬∞F when home, 60¬∞F when away\n‚Ä¢ Summer: 78¬∞F when home, 85¬∞F when away\n‚Ä¢ Use sleep schedules for bedrooms\n\n**Smart Features**:\n‚Ä¢ Enable geofencing\n‚Ä¢ Set up vacation mode\n‚Ä¢ Use learning capabilities\n‚Ä¢ Integrate with weather data\n\n**Programming**:\n‚Ä¢ Create daily schedules\n‚Ä¢ Set different temps for weekdays/weekends\n‚Ä¢ Program for special events\n\n**Maintenance**:\n‚Ä¢ Clean sensors monthly\n‚Ä¢ Check filter status\n‚Ä¢ Update firmware regularly\n\nWould you like help setting up specific schedules?",
                        followUp: "What type of thermostat do you have?"
                    },
                    'app': {
                        response: "Here's how to connect your smart devices to the NestMate app:\n\n**Getting Started**:\n1. Download NestMate app from App Store/Google Play\n2. Create an account or sign in\n3. Allow necessary permissions\n\n**Adding Devices**:\n1. Tap 'Add Device' in the app\n2. Select device type (bulb, plug, camera, etc.)\n3. Follow pairing instructions\n4. Name your device and assign to room\n\n**Supported Devices**:\n‚Ä¢ Smart bulbs (Philips Hue, LIFX, etc.)\n‚Ä¢ Smart plugs and switches\n‚Ä¢ Thermostats (Nest, Ecobee)\n‚Ä¢ Security cameras\n‚Ä¢ Door locks\n‚Ä¢ Sensors\n\n**Troubleshooting**:\n‚Ä¢ Ensure device is in pairing mode\n‚Ä¢ Check WiFi connection\n‚Ä¢ Restart device if needed\n‚Ä¢ Contact support for complex issues\n\nNeed help with a specific device?",
                        followUp: "What devices are you trying to connect?"
                    }
                };

                // Check for smart home queries
                for (const [key, data] of Object.entries(smartHomeResponses)) {
                    if (userMessageLower.includes(key)) {
                        return data.response;
                    }
                }

                // Default responses for general questions
                const defaultResponses = [
                    "I'd be happy to help you with that! I have comprehensive knowledge about the NestMate website and all its features. Could you provide more details about what you're looking for?",
                    "That's a great question! I can help you with any aspect of NestMate - from smart home setup to document management, maintenance tracking, energy optimization, and more. What specific feature would you like to know about?",
                    "I'm your NestMate AI assistant with complete knowledge of the website! I can help with smart home setup, maintenance, energy saving, security, document management, shopping, and technical support. What would you like to know?",
                    "Thanks for asking! I'm here to help with all your NestMate needs. I know about every page, feature, and functionality in the system. Could you elaborate on your question?",
                    "I'm your comprehensive NestMate assistant! I can help with website navigation, smart home automation, maintenance scheduling, energy management, security setup, document organization, and technical support. What's on your mind?"
                ];

                return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
            }

            async sendMessage() {
                const message = this.chatInput.value.trim();
                if (!message || this.isTyping) return;

                // Add user message
                this.addUserMessage(message);
                this.chatInput.value = '';
                this.adjustTextareaHeight();
                this.updateSendButton();

                // Show typing indicator
                this.showTypingIndicator();

                // Generate and add bot response
                const response = await this.generateResponse(message);
                this.hideTypingIndicator();
                this.addBotMessage(response);

                // Add quick actions after bot response
                setTimeout(() => {
                    this.addQuickActions();
                }, 500);
            }
        }

        // Initialize chatbot
        const chatbot = new Chatbot();

        // Global functions for HTML onclick events
        function sendMessage() {
            chatbot.sendMessage();
        }

        function sendQuickMessage(message) {
            chatbot.sendQuickMessage(message);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // Auto-resize textarea on load
        document.addEventListener('DOMContentLoaded', () => {
            chatbot.adjustTextareaHeight();
            chatbot.updateSendButton();
        });
    </script>
</body>
</html>
