<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: #f0f0f0;
        }
        .container {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Redirecting to your dashboard...</h2>
        <div class="spinner"></div>
        <p>Please wait while we redirect you to the correct dashboard.</p>
    </div>

    <script>
        console.log('üöÄ FORCE REDIRECT PAGE LOADED');
        
        // Force redirect function
        function forceRedirect() {
            console.log('üöÄ FORCE REDIRECT: Starting redirect process');
            
            // Wait for auth state to be ready
            firebase.auth().onAuthStateChanged((user) => {
                console.log('üöÄ FORCE REDIRECT: Auth state changed, user:', user);
                
                if (user && user.email === 'jillmullins09@gmail.com') {
                    console.log('‚úÖ FORCE REDIRECT: jillmullins09@gmail.com detected - going to advanced dashboard');
                    window.location.href = 'https://nestmateus.com/dashboard-advanced.html';
                    return;
                }
                
                console.log('üìä FORCE REDIRECT: Other user - going to trial dashboard');
                window.location.href = 'dashboard-trial.html';
            });
        }
        
        // Wait for Firebase to load
        function waitForFirebase() {
            if (typeof firebase !== 'undefined' && firebase.auth) {
                console.log('‚úÖ FORCE REDIRECT: Firebase loaded');
                forceRedirect();
            } else {
                console.log('‚è≥ FORCE REDIRECT: Waiting for Firebase...');
                setTimeout(waitForFirebase, 100);
            }
        }
        
        // Start the process
        waitForFirebase();
        
        // Fallback redirect after 5 seconds
        setTimeout(() => {
            console.log('‚è∞ FORCE REDIRECT: Fallback redirect after 5 seconds');
            window.location.href = 'dashboard-trial.html';
        }, 5000);
    </script>
    
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC7vRXVWl64DyBHywDOcRHAwm5Oij5G7yI",
            authDomain: "data-41fa8.firebaseapp.com",
            projectId: "data-41fa8",
            storageBucket: "data-41fa8.firebasestorage.app",
            messagingSenderId: "865171535257",
            appId: "1:865171535257:web:9944a48a952e99f55f0f08",
            measurementId: "G-1DYR2RGY4G"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        console.log('‚úÖ FORCE REDIRECT: Firebase initialized');
    </script>
</body>
</html>
